apiVersion: v1
kind: Config
clusters:
  - cluster:
      insecure-skip-tls-verify: true
      server:  https://192.168.49.2:8443
    name: dev.wsp

contexts:
  - context:
      cluster: dev.wsp
      user: oidc-dev
    name: oidc@dev.wsp

current-context: oidc@dev.wsp
users:
  - name: oidc-dev
    user:
      exec:
        apiVersion: client.authentication.k8s.io/v1beta1
        args:
          - oidc-login
          - get-token
          - --oidc-issuer-url=http://dex.dex.svc.cluster.local:5556
          - --oidc-client-id=kubelogin
          - --oidc-client-secret="aes3ahtootieyeish3iep7cohcee2eiKiineroo6vu"
#          - --oidc-extra-scope="email groups"
        command: kubectl
